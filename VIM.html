<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Interactive vi Editor Cheat Sheet</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #003f5c;
            color: #f0f4f8;
        }
        .card {
            background-color: #00334a;
            border: 1px solid #005f87;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 320px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .mode-diagram {
            display: flex;
            justify-content: space-around;
            align-items: center;
            flex-wrap: wrap;
            padding: 1rem;
        }
        .mode-box {
            background-color: #58508d;
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 0.5rem;
            text-align: center;
            margin: 0.5rem;
            min-width: 120px;
        }
        .mode-arrow {
            font-size: 1.5rem;
            color: #ffa600;
            position: relative;
            text-align: center;
        }
        .mode-arrow span {
            font-size: 0.8rem;
            position: absolute;
            bottom: -1.2rem;
            left: 50%;
            transform: translateX(-50%);
            white-space: nowrap;
            background-color: #ff6361;
            padding: 2px 6px;
            border-radius: 4px;
        }
        .command-key {
            background-color: #bc5090;
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-family: monospace;
            font-weight: bold;
        }
    </style>
</head>
<body class="antialiased">

    <div class="container mx-auto p-4 md:p-8">

        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold text-white mb-2">The Interactive <span class="text-[#ffa600]">vi</span> Editor Cheat Sheet</h1>
            <p class="text-lg text-gray-300">Visualizing the power and logic of a timeless editor.</p>
        </header>

        <main class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">

            <section class="card rounded-lg shadow-lg p-6 md:col-span-2 lg:col-span-3">
                <h2 class="text-2xl font-bold mb-4 text-[#ff6361]">The `vi` Philosophy: Understanding Modes</h2>
                <p class="mb-6 text-gray-300">The most crucial concept in `vi` is its modal nature. Unlike other editors, your keyboard does different things depending on the current mode. Mastering the flow between modes is the first step to mastering `vi`.</p>
                <div class="mode-diagram">
                    <div class="mode-box"><strong>COMMAND</strong><br>(Default)</div>
                    <div class="mode-arrow">‚Üí<span class="command-key">i, a, o...</span></div>
                    <div class="mode-box"><strong>INSERT</strong><br>(Type Text)</div>
                    <div class="mode-arrow">‚Üí<span class="command-key">Esc</span></div>
                    <div class="mode-box"><strong>COMMAND</strong><br>(Default)</div>
                    <div class="mode-arrow">‚Üí<span class="command-key">:</span></div>
                    <div class="mode-box"><strong>LAST LINE</strong><br>(Save, Quit...)</div>
                </div>
            </section>

            <section class="card rounded-lg shadow-lg p-6">
                <h2 class="text-2xl font-bold mb-4 text-[#ff6361]">üö™ Getting In & Out</h2>
                <p class="mb-4 text-gray-300">These are the most fundamental commands for file operations.</p>
                <ul class="space-y-3">
                    <li class="flex justify-between items-center"><span class="text-gray-200">Save & Quit</span> <code class="command-key">:wq</code></li>
                    <li class="flex justify-between items-center"><span class="text-gray-200">Quit (No Save)</span> <code class="command-key">:q!</code></li>
                    <li class="flex justify-between items-center"><span class="text-gray-200">Save File</span> <code class="command-key">:w</code></li>
                    <li class="flex justify-between items-center"><span class="text-gray-200">Quit</span> <code class="command-key">:q</code></li>
                </ul>
            </section>

            <section class="card rounded-lg shadow-lg p-6">
                <h2 class="text-2xl font-bold mb-4 text-[#ff6361]">üèÉ‚Äç‚ôÇÔ∏è The Art of Movement</h2>
                <p class="mb-4 text-gray-300">Efficient navigation is `vi`'s superpower. Move by character, word, line, or screen.</p>
                <ul class="space-y-3">
                    <li class="flex justify-between items-center"><span class="text-gray-200">Character</span> <div><code class="command-key">h</code> <code class="command-key">j</code> <code class="command-key">k</code> <code class="command-key">l</code></div></li>
                    <li class="flex justify-between items-center"><span class="text-gray-200">Word</span> <div><code class="command-key">w</code> <code class="command-key">b</code> <code class="command-key">e</code></div></li>
                    <li class="flex justify-between items-center"><span class="text-gray-200">Start/End of Line</span> <div><code class="command-key">0</code> <code class="command-key">$</code></div></li>
                    <li class="flex justify-between items-center"><span class="text-gray-200">Start/End of File</span> <div><code class="command-key">gg</code> <code class="command-key">G</code></div></li>
                </ul>
            </section>
            
            <section class="card rounded-lg shadow-lg p-6">
                <h2 class="text-2xl font-bold mb-4 text-[#ff6361]">‚úçÔ∏è Inserting Text</h2>
                <p class="mb-4 text-gray-300">Switch to Insert Mode to add content. Each command provides a different entry point.</p>
                 <ul class="space-y-3">
                    <li class="flex justify-between items-center"><span class="text-gray-200">Insert Before Cursor</span> <code class="command-key">i</code></li>
                    <li class="flex justify-between items-center"><span class="text-gray-200">Append After Cursor</span> <code class="command-key">a</code></li>
                    <li class="flex justify-between items-center"><span class="text-gray-200">New Line Below</span> <code class="command-key">o</code></li>
                    <li class="flex justify-between items-center"><span class="text-gray-200">New Line Above</span> <code class="command-key">O</code></li>
                </ul>
            </section>

            <section class="card rounded-lg shadow-lg p-6 md:col-span-2">
                <h2 class="text-2xl font-bold mb-4 text-[#ff6361]">‚úÇÔ∏è Text Manipulation Power</h2>
                <p class="mb-4 text-gray-300">In `vi`, deleting and copying (yanking) use similar commands, differing only by a letter. This chart visualizes the relative scope of common manipulation commands. Notice how `d` (delete) and `y` (yank) precede a motion.</p>
                <div class="chart-container">
                    <canvas id="manipulationChart"></canvas>
                </div>
            </section>
            
            <section class="card rounded-lg shadow-lg p-6">
                <h2 class="text-2xl font-bold mb-4 text-[#ff6361]">üìã Pasting</h2>
                <p class="mb-4 text-gray-300">Paste yanked or deleted text. The location depends on whether you copied a character block or a full line.</p>
                 <ul class="space-y-3">
                    <li class="flex justify-between items-center"><span class="text-gray-200">Paste After Cursor/Line</span> <code class="command-key">p</code></li>
                    <li class="flex justify-between items-center"><span class="text-gray-200">Paste Before Cursor/Line</span> <code class="command-key">P</code></li>
                    <li class="flex justify-between items-center"><span class="text-gray-200">Undo Last Change</span> <code class="command-key">u</code></li>
                    <li class="flex justify-between items-center"><span class="text-gray-200">Redo</span> <code class="command-key">Ctrl-r</code></li>
                </ul>
            </section>

            <section class="card rounded-lg shadow-lg p-6 md:col-span-2">
                <h2 class="text-2xl font-bold mb-4 text-[#ff6361]">üîç Search & Replace Scope</h2>
                <p class="mb-4 text-gray-300">The replace command (`:s`) becomes more powerful as you add flags. This chart shows how the scope of a replacement grows from a single instance on one line to every instance in the entire file.</p>
                <div class="chart-container">
                    <canvas id="replaceChart"></canvas>
                </div>
            </section>
            
            <section class="card rounded-lg shadow-lg p-6 lg:col-span-1">
                <h2 class="text-2xl font-bold mb-4 text-[#ff6361]">üé® Visual Mode Selections</h2>
                <p class="mb-4 text-gray-300">Visual mode allows you to select text before acting on it. Different commands initiate different types of selection blocks.</p>
                <div class="chart-container h-64 md:h-auto">
                    <canvas id="visualModeChart"></canvas>
                </div>
            </section>

        </main>

        <footer class="text-center mt-12 text-gray-400">
            <p>Crafted with Chart.js and Tailwind CSS. No SVGs or Mermaid JS were used in this infographic.</p>
        </footer>

    </div>

    <script>
        const tooltipTitleCallback = (tooltipItems) => {
            const item = tooltipItems[0];
            let label = item.chart.data.labels[item.dataIndex];
            if (Array.isArray(label)) {
                return label.join(' ');
            }
            return label;
        };

        const chartDefaultOptions = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    labels: {
                        color: '#f0f4f8'
                    }
                },
                tooltip: {
                    callbacks: {
                        title: tooltipTitleCallback
                    }
                }
            },
            scales: {
                y: {
                    ticks: { color: '#f0f4f8' },
                    grid: { color: 'rgba(255, 255, 255, 0.1)' }
                },
                x: {
                    ticks: { color: '#f0f4f8' },
                    grid: { color: 'rgba(255, 255, 255, 0.1)' }
                }
            }
        };

        const wrapLabel = (label, maxWidth = 16) => {
            if (label.length <= maxWidth) {
                return label;
            }
            const words = label.split(' ');
            const lines = [];
            let currentLine = '';
            words.forEach(word => {
                if ((currentLine + ' ' + word).trim().length > maxWidth) {
                    lines.push(currentLine.trim());
                    currentLine = word;
                } else {
                    currentLine = (currentLine + ' ' + word).trim();
                }
            });
            if (currentLine) {
                lines.push(currentLine.trim());
            }
            return lines;
        };
        
        const manipulationData = {
            labels: ['x (char)', 'dw (word)', 'dd (line)', 'd$ (to end of line)', 'dG (to end of file)'],
            datasets: [{
                label: 'Delete Scope',
                data: [1, 5, 10, 15, 20],
                backgroundColor: '#bc5090',
                borderColor: '#ff6361',
                borderWidth: 1
            }, {
                label: 'Yank (Copy) Scope',
                data: [0, 5, 10, 15, 20],
                backgroundColor: '#58508d',
                borderColor: '#ffa600',
                borderWidth: 1
            }]
        };

        const replaceData = {
            labels: [':s/old/new/', ':s/old/new/g', ':%s/old/new/g', ':%s/old/new/gc'],
            datasets: [{
                label: 'Replacement Scope',
                data: [1, 2, 3, 4],
                backgroundColor: ['#58508d', '#bc5090', '#ff6361', '#ffa600'],
                borderColor: '#003f5c',
                borderWidth: 2
            }]
        };

        const visualModeData = {
            labels: ['v (Character)', 'V (Line)', ['Ctrl-v', '(Block)']],
            datasets: [{
                label: 'Selection Type',
                data: [33.3, 33.3, 33.3],
                backgroundColor: ['#ff6361', '#ffa600', '#58508d'],
                hoverOffset: 4
            }]
        };
        
        window.onload = function() {
            const ctxManipulation = document.getElementById('manipulationChart');
            if(ctxManipulation) {
                new Chart(ctxManipulation, {
                    type: 'bar',
                    data: manipulationData,
                    options: { ...chartDefaultOptions, indexAxis: 'y' }
                });
            }

            const ctxReplace = document.getElementById('replaceChart');
            if(ctxReplace) {
                new Chart(ctxReplace, {
                    type: 'bar',
                    data: {
                        ...replaceData,
                        labels: replaceData.labels.map(l => wrapLabel(l))
                    },
                    options: chartDefaultOptions
                });
            }

            const ctxVisual = document.getElementById('visualModeChart');
            if(ctxVisual) {
                new Chart(ctxVisual, {
                    type: 'doughnut',
                    data: visualModeData,
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                           legend: {
                                position: 'top',
                                labels: { color: '#f0f4f8' }
                           },
                           tooltip: {
                                callbacks: {
                                    title: tooltipTitleCallback
                                }
                           }
                        }
                    }
                });
            }
        };
    </script>
</body>
</html>
